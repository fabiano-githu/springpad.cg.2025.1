# Projeto ONCredit - Preparando o Firebase

*`Por Luferat ‚Äî 02/02/2026`*

> **VERSIONAMENTO**
> - _Crie um novo branch baseado no anterior._

Inicialmente, vamos usar o **Firebase Realtime Database** ou simplesmente **RTDB** como API REST (JSON), o que simplifica a constru√ß√£o do aplicativo por enquanto.

> **DICA!**
> - _No futuro o **RTDB** pode ser substitu√≠do por sua pr√≥pria **API REST**, com poucos ajustes no aplicativo._

 1. Acesse o [Firebase](https://firebase.com) e logue-se com sua conta Google, se necess√°rio;
 2. Acesse o "Console" e escolha uma op√ß√£o:
      - [ ] Crie um novo projeto. Pode seguir [esses passos](https://gist.lufer.click/artigos/back-end-com-firebase), mas s√≥ precisaremos do "Realtime Database";
      - [ ] Use um projeto existente que n√£o est√° usando o "Realtime Database" no momento.
3. No projeto, ative o "Realtime Database" clicando nele no menu esquerdo ‚Üí Cria√ß√£o;
4. Clique em "Criar banco de dados" e aceite o local clicando em `[Avan√ßar]`;
5. Marque "Iniciar no modo de teste" e clique em `[Ativar]`;
6. Clique no üîó ao lado do endere√ßo do banco de dados para copi√°-lo;

> **ATEN√á√ÉO!**
> - _O endere√ßo do RTDB tem um formato `https://********-default-rtdb.firebaseio.com/`._
> - _√â ess√™ncial que o endere√ßo esteja correto para que o front-end se comunique com o back-end!_

7. Abra o arquivo `lib/config/app_config.dart` e adicione a constante `baseUrl` com o endere√ßo do RTDB, mas sem a barra final.
Teremos algo como:

```dart
// lib/config/app_config.dart

class AppConfig {
  static const String fixedUid = 'dev_uid_001';
  static const String baseUrl = 'https://********-default-rtdb.firebaseio.com';
}
```

> **ATEN√á√ÉO!**
> - _Lembre-se de remover a barra final `/` do endere√ßo de `baseUrl_`._

8. De volta ao console do Firebase RTDB, clique na guia `Regras` e substitua as regras atuais por:

```json
{
  "rules": {
    "users": {
      "dev_uid_001": {
        ".read": true,
        ".write": true
      }
    }
  }
}
```

> **IMPORTANTE!**
> - _Nessas regras, a chave `"dev_uid_001"` deve ser substitu√≠da pela sua chave, configurada em `lib/config/app_config.dart`, se necess√°rio._

## Dados Fake

Como j√° estamos com o RTDB aberto, vamos criar a base de dados com dados fake para os primeiros testes do aplicativo. 
Siga os passos:

1. Copie o JSON abaixo e cole em um novo arquivo `lib/oncredit_data.json` no projeto Flutter:

```json
{
  "users": {
    "dev_uid_001": {
      "clients": {
        "c1": {
          "name": "Maria Aparecida",
          "cpf": "123.456.789-00",
          "phones": ["11999990001"],
          "createdAt": "2026-01-10"
        },
        "c2": {
          "name": "Jo√£o Carlos",
          "cpf": "987.654.321-00",
          "phones": ["11988880002", "11977770003"],
          "createdAt": "2026-01-12"
        }
      },

      "purchases": {
        "p1": {
          "clientId": "c1",
          "description": "Blusa feminina",
          "quantity": 1,
          "unitValue": 89.90,
          "totalValue": 89.90,
          "date": "2026-01-15"
        },
        "p2": {
          "clientId": "c1",
          "description": "Cal√ßa jeans",
          "quantity": 1,
          "unitValue": 149.90,
          "totalValue": 149.90,
          "date": "2026-01-20"
        },
        "p3": {
          "clientId": "c2",
          "description": "Camisa social",
          "quantity": 2,
          "unitValue": 79.90,
          "totalValue": 159.80,
          "date": "2026-01-18"
        }
      },

      "payments": {
        "pay1": {
          "clientId": "c1",
          "value": 100.00,
          "method": "PIX",
          "date": "2026-01-22"
        },
        "pay2": {
          "clientId": "c2",
          "value": 50.00,
          "method": "Dinheiro",
          "date": "2026-01-25"
        }
      }
    }
  }
}
```

2. Se necess√°rio, troque a chave `dev_uid_001` no come√ßo do JSON pela sua chave, configurada na string `fixedUid` em `lib/config/app_config.dart`;
3. Salve o arquivo;
4. De volta ao console do RTDB, clique na guia `Dados`;
5. Ao lado do URL do RTDB, clique nos "tr√™s pontinhos" e em "Importar o JSON";
6. Clique em "Procurar" e localize o arquivo `oncredit_data.json` criado na raiz do projeto;
7. Clique em "Importar". Devemos ter algo como:

<p align="center"><img alt="image" src="https://gist.github.com/user-attachments/assets/22e08f5e-86a1-490c-85a3-7e9a2c9f8e5c" /></p>


---

<p align="center"><a href="#file-00-md">‚Üë Sum√°rio</a></p>
