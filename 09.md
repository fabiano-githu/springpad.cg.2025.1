# Projeto ONCredit - Cadastro de Clientes

*`Por Luferat — 06/02/2026`*

> **VERSIONAMENTO**
> - _Crie um novo branch baseado no anterior._

## Refinando a base de dados

Antes de inserir novos clientes, vamos otimizar a base de dados para que CPF e telefones sejam apenas números, o que vai facilitar as pesquisas no futuro.

1. Atualize o _moch_ da base de dados em `lib/oncredit_data.json`:

|[`lib/oncredit_data.json`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/oncredit_data.json)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

2. Importe esta nova versão no "Firebase Realtime Database":
    - Clique no três pontos à direita;
    - Clique em "Importar o JSON";
    - Localize e selecione o arquivo `lib/oncredit_data.json` clicando em "Procurar";
    - Clique em `[Importar]`.


## Cadastrar cliente

Vamos ativar a funcionalidade do botão `[Novo cliente]` que temos na página inicial.

1. Adicione a dependência do `mask_text_input_formatter: ^2.5.0` no `pubspec.yaml`. Ela será usada para insersão do CPF e telefones:

|[`pubspec.yaml`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/pubspec.yaml)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

2. Abra um terminal e atualize as dependências, comandando:

```cmd
flutter pub get
```

3. Edite `lib/services/client_service.dart`:

|[`lib/services/client_service.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/services/client_service.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

4. Crie a página de cadastro em `lib/pages/new_client_page.dart`:

|[`lib/pages/new_client_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/pages/new_client_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

5. Altere o `onPressed` do botão `[Novo cliente]` em `lib/pages/home.dart` e faça ajustes no `state`:

|[`lib/pages/home.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/pages/home.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

6. Precisamos ajustar a formatação do CPF nas _libs_ abaixo:

|[`lib/models/client.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/models/client.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

|[`lib/pages/client_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/pages/client_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

|[`lib/pages/client_history_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/007.Novo_cliente/lib/pages/client_history_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

Faça todos os testes no aplicativo e verifique se novos cadastros aparecem normalmente.

---

<p align="center"><a href="#file-00-md">↑ Sumário</a></p>