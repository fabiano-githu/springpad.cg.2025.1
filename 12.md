# Projeto ONCredit - Apagar Cliente

*`Por Luferat — 09/02/2026`*

> **VERSIONAMENTO**
> - _Crie um novo branch baseado no anterior._


Vamos dar funcionalidade ao botão "Apagar" cliente, disponível na tela "Editar Cliente" e também encerrar o "fluxo do cliente".

Por se tratar de uma operação crítica, para que um cliente possa ser apagado, o operador precisar digitar "apagar" para confirmar o processo.

<p align="center"><img width="400" alt="image" src="https://gist.github.com/user-attachments/assets/3d9523e9-f255-4512-be39-75e4e1d6e74b" /></p>


Vamos aos passos:

1. Altere `lib/pages/home.dart` para sempre exibir a lista de cliente atualizada:

|[`lib/pages/home.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/pages/home.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

2. Atualize `lib/pages/client_page.dart` para passar o `state` de forma correta para `lib/pages/client_edit_page.dart`:

|[`lib/pages/client_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/pages/client_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

3. Adicione o método `deleteClient()` em `lib/services/client_service.dart`:

|[`lib/services/client_service.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/services/client_service.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

4. Adicione o método `deleteClientHistory()` em `lib/services/finance_service.dart`:

|[`lib/services/finance_service.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/services/finance_service.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

5. Implemente os métodos `_confirmDelete()` e `_deleteClient()` além da confirmação em `lib/pages/client_edit_page.dart`:

|[`lib/pages/client_edit_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/pages/client_edit_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |


## Pequenos Ajustes

Antes de testar, vamos ajustar alguns códigos e corrigir pequenas _issues_ deixadas para trás:

1. Melhoramos o campo `CPF` em `lib/widgets/client_form.dart`:

|[`lib/widgets/client_form.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/widgets/client_form.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

2. Temos que adicionar a opção `cpfEnabled: true,` em `lib/pages/new_client_page.dart`, o que já foi feito em `lib/pages/client_edit_page.dart`, só que `cpfEnabled: false,`:

|[`lib/pages/new_client_page.dart`](https://raw.githubusercontent.com/Luferat/oncredit/refs/heads/010.Apagar_cliente/lib/pages/new_client_page.dart)|
|---|
| _Mantenha <kbd>Ctrl</kbd> pressionado ao clicar no link._ |

Rode o aplicativo e teste todas as funcionalidades novamente, sempre nas versões **Web** e **Android**.

Com esse tutorial, encerramos o "fluxo do cliente" e nos próximos, vamos desenvolver o "fluxo financeiro"...


---

<p align="center"><a href="#file-00-md">↑ Sumário</a></p>